# Antecedentes
## Conceptos Esenciales

***Evento***: Es cualquier ocurrencia

***Incidente***: Evento anómalo y de relevancia el cual de acuerdo con las reglas del negocio hacia algún activo de información ==**afecta**== cualquier elemento de la triada de la ciberseguridad.

###### ¿Qué es la informática forense?

> *"Es una rama de la computación dedicada a la aplicación de técnicas, científicas y analíticas para la captura, procesamiento, análisis e investigación de información almacenada en computadoras utilizando una ==metodología== donde la evidencia descubierta es aceptable en un proceso legal."*

El análisis forense se basa en un importante estatuto de hace más de 100 años:

> *"Siempre que 2 objetos entran en contacto transfieren parte del material que incorporan al otro objeto"*

\> *Edmond Locard*

## Fundamentos del análisis forense

1. ***Imparcialidad***: Esta debe regir sobre toda la investigación y sobre los demás fundamentos.
2. **Generar registro de absolutamente todo**
3. **Minimizar la perdida de evidencia**
4. **Analizar la evidencia recopilada**
5. **Generar un informe**

## Objetivos del análisis forense

> Se desarrollan hipótesis explicando eventos y se determina si los hallazgos identificados las respaldan o las contradicen.

Además se definen características generales del objeto que se está buscando.

***Preguntas clave***:

- ¿Qué estamos buscando?
- ¿En dónde esperamos encontrarlo?

## *Guia del Qué*

- ¿Qué ocurrió?
- ¿Cuando ocurrió?
- ¿Cómo ocurrió?
- ¿Desde dónde lo hizo?
- ¿Quién lo hizo?
- ¿Por qué lo hizo?

## Evidencia Digital

> Todo aquel elemento de información que respalda una hipótesis durante un proceso de investigación.

Pueden estar contenidos en:

- Computadoras personales
- Teléfonos inteligentes
- Tabletas electrónicas
- Servidores
- Drones
- Electrodomésticos

#### Tipos de contenedores

***Dispositivos físicos de almacenamiento***:
- Volumen
	- Sistema de archivos
		- Aplicaciones
	- *Swap*
- Memoria

***Dispositivos de red***

#### Escala de volatibilidad

> Hace referencia a que tan volátiles son los datos, es decir, que tan rápido se *"pierden"*.

De mayor a menor volatibilidad:

1. Tablas de ruteo
2. Tráfico de red
3. Memoria RAM
4. Disco duro y dispositivos extraibles.

## Respuesta a incidentes y Análisis Forense

Un breve repaso de las etapas de una respuesta a incidentes es:

1. **Preparación**: Tecnológica y presonalmente, capacitación, manuales y protocolos.
2. **Identificación**: Cuando reconocemos un evento como ==incidente==.
3. **Contención/Recolección de Inteligencia**: Asociar, catalogar, clasificar y recopilar toda la información sobre el incidente.
4. **Erradicación/Remediación**: Acciones orientadas a corregir y recuperar el estado sano del sistema.
5. **Recuperación**: Implica intentar recuperarse o ponerse al dia con todo el trabajo perdido durante el compromiso.
6. **Seguimiento y lecciones aprendidas**: Evaluar las causas, aprendizajes y posibles mejoras al sistema en base a la experiencia del incidente.

> El ***análisis forense*** se ubica entre las etapas de identificación y recolección.

## Metodología del Análisis Forense

> La metodología convencional del análisis forense es:

1. ***Respuesta a incidentes y adquisición de evidencia***:
	1. Verificación
	2. Descripción del sistema

2. Adquisición de evidencia

3. ***Análisis e investigación***:
	1. Análisis de línea del tiempo
	2. Análisis de medios
	3. Búsqueda de cadenas
	4. Recuperación de datos

4. Reporte de resultados

---
### Verificación

Los primeros momentos una vez que ha sucedido un incidente de ciberseguridad son fundamentales para una respuesta adecuada.

> Dependiendo del tipo de incidente, es necesario realizar tareas puntuales (captura de tráfico, adquisición de memoria volátil, entrevistas con los usuarios o responsables de equipos) antes de iniciar con el proceso de respuesta a incidentes.

##### Primera respuesta al incidente

> Alguien capacitado busca identificar el incidente y evaluar la situación para brindar la respuesta adecuada, con apyo del manejo de herramientas de recolección de información.

1. **Ejecutar**: Debe manejar adecuada y correctamente las herramientas dispuestas para la respuesta.
2. **Acercamiento**: Involucra el trato con las personas, recolectando toda la información importante de las personas.

### Descripción del sistema

> Recolección de toda la información disponible del sistema a analizar, por ejemplo:

- Ubicación física y lógica del sistema.
- Principal uso del sistema.
- Configuraciones del sistema.
- Programas/Servicios instalados en el sistema.
- Usuarios válidos.

### Adquisición de Evidencia

> El objetivo principal es la preservación del estado original de la evidencia y todas las acciones realizadas en esta etapa deben ser correctamente documentadas con puntualidad.

Se pueden encontrar principalmente 2 escenarios:

- **Equipo encendido**: Se le conoce como *sistema vivo*, evidencia volátil.
- **Equipo apagado**: Se le conoce como *sistema muerto*, evidencia no volátil.

###### Equipo encendido

- La recolección de memoria volátil consiste en realizar una copia de todos los bits de la memoria *RAM* y redirigirlos a un archivo.
- Existen múltiples herramientas que permitan realizar este *"volcado de memoria"*

###### Equipo apagado

- Unidades de almacenamiento
- Sistemas de archivos
- Bitácoras
- Artefactos del sistema operativo

La decisión de apgar o desconectar el equipo de la red durante la etapa de respuesta a incidentes ==dependerá de las políticas de cada corganización==.

Realizar un análisis vivo y además un análisis muerto permitirá obtener mayor evidencia y por lo tanto, realizar un análisis más completo con conclusiones mejor fundamentadas.

##### Imagen Forense

Antes de seguir con las etapas, debe especificarse qué es una imagen forense:

> Una ***imagen forense*** es una copia bit a bit del contenido de un dispositivo de almacenamiento digital, se lleva a cabo con la ayuda de alguna herramienta avanzada.

Existen varias formas de almacenar este tipo de imágenes, los formatos más comúnes son:

- *RAW*
- *EWF* - (*Expert Witness Format*)
- *AFF* - (*Advance Forencisc Format*)

Una vez generada cada imágen forense será necesario garantizar su integridad, ya que la mínima modificación puede poner en riesgo toda la investigación.

- Algoritmos de digestión para el dispositivo original y para la copia generada.
- Generar más de una copia y *NUNCA* trabajar con el dispositivo original.

##### Principios de una adquisición

- Preservación: Preservar el estado de la escena.
- Cambios: Reducir los cambios a la evidencia.
- Recopilación: Recopilar toda la información útil que se pueda.
- Documentación: Documentar el estado de los equipos afectados.
- Legislación: Se deben tomar en cuenta los requirimientos legales y operacionales o del negocio.
- Cadena de Custodia: Llevar un registro acerca del manejo de la evidencia.

##### Cadena de custodia

> Se refiere a un registro detallado y descriptivo de la interacción de cualquier especialista con la evidencia, con el objetivo de dar seguimiento a los cambios en ella y en dado caso, asignar responsabilidades acerca de las acciones realizadas sobre la evidencia.

Por supuesto esta información es crucial para una investigación interna cuando se ha contaminado la evidencia.

Es importante, contar con la presencia de un tercero que dé fé de las acciones realizadas con la evidencia y respalde el registro.

### Análisis de Linea de Tiempo

> Se busca generar una línea de tiempo del ==sistema de archivos== para su correspondiente análisis.

- Marcas de tiempo de archivos
- Considerar eventos relevantes
	- Fecha de instalación del sistema operativo
	- Fecha de instalación de actualizaciones mayores
	- Fecha de último apagado o reinicio.
- Incluir cualquier otro evento que se considere relevante.

### Análisis de Medios

También conocida como análisis de artefactos.

> Se debe analizar a fondo toda la evidencia generada en la fase de adquisición.

### Búsqueda de cadenas

> Consiste de una búsqueda de palabras clave sobre la evidencia.

Se define un diccionario de palabras clave relacionadas con el incidente a investigar, incluso a bajo nivel.

### Recuperación de datos

> Busca reestablecer información, datos o archivos eliminados o almacenados en el espacio de holgura. identificar fechas de borrado.

Se debe describir el proceso realizado para la recuperación de datos.

Puede (y debería ser idealmente) realizado a bajo nivel o simplemente utilizando herramientas.

### Presentación/Reporte

>El éxito del análisis forense depende en gran medida de la elaboración de un buen informe, si el análisis es bueno pero el informe deficiente, es probable que el esfuerzo sea en vano.

**Es importante identificar el tipo de audiencia al que va dirigido, ya sea ejecutivo o técnico.**

Debe tener ==bien documentados== **todos** los procesos reaizados en la investigación, además de ser claro e imparcial.