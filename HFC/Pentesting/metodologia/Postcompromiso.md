[<- Índice](../Pentesting.md)
# Post-Compromiso

> De igual manera que al inicio de la prueba, para concluirla satisfactoriamente y cobrar, requerimos del ***papeleo*** necesario como reportes, documentos, evidencias y demás procedimientos.

### Limpieza

> Un primer punto más importante es la **limpieza** de todos los sistemas con los que interactuamos, por ejemplo, la depuración de archivos que hayamos creado, de registros, cambios en configuraciones y demás archivos, etc.

Básicamente, el objetivo es regresar todo el sistema y la infraestructura a su estado antes de la **Prueba de Penetración**, deshaciendo todos los cambios que hayamos hecho.

Es importante que, en caso de no poder remediar algunos cambios, ya sea por temas de configuraciones, autorizacióno cualquier otro, reportemos estas excepciones y documentemos adecuadamente la alteración que sufrió.
De este modo, la organización puede identificar nuestra actividad e investigar y remediar dichas excepciones.

### Documentación y Reportaje

> Antes de dar por terminada la prueba y antes de desconectarnos definitivamente de la red del cliente, debemos asegurarnos de contar con la documentación adecuada de todos los hallazgos y procedimientos realizados durante la prueba.

Esto incluye historiales de comandos, salidas de comandos, capturas de pantalla, registros, etc.

Deberiamos ya tener una buena documentación de cada vulnerabilidad encontrada, que debemos incluir en un reporte formal de forma organizada y con secciones como:

- **Cadena de ataque**: Descripción del procedimiento completo de **compromiso** a todos los equipos afectados

- **Resumen ejecutivo**: Un gran resumen de la información que pueda entender cualquier audiencia **no-técnica**

- **Hallazgos detallados**: Una descripción detallada de las vulnerabilidades encontradas en el sistema del cliente que incluya un **puntaje de riesgo**, **impacto de la vulnerabilidad**, **recomendaciones generales de remediación** y referencias a recursos externos sobre la vulnerabilidad.

- **Reproducción de la explotación**: Pasos a seguir para reproducir la explotación de la vulnerabilidad, de modo que los responsables de remediación puedan entender y corregir las vulnerabilidades adecuadamente.

- **Recomendaciones generales**: Recomendaciones generales para la organización, infraestructura y/o sistema del cliente, a corto, mediano y largo plazo.

- **Apéndices**: Cualquier información adicional relevante al reporte como datos encontrados mediante *OSINT*, dispositivos comprometidos, archivos transferidos, análisis de crackeo de contraseñas, documentación externa, etc.

Con todo esto se realiza un **reporte borrador** que se entregará al cliente para cualquier aclaración, duda o modificación.

### Junta de revisión de reporte

> Una ve que se entrego el **borrador**, y los responsables por parte del cliente lo han leído y revisado a fondo, se realiza una reunión de revisión del reporte donde se revisa detalladamente cada sección de este, se presentan dudas, se corrigen errores o aclaraciones, entre otras cosas.

Dependiendo de los hallazgos, el cliente puede incluir en la junta a los responsables relacionados a la aplicación, sistema o dispositivo vulnerables para que puedan indagar sobre la vulnerabilidad, responsabilizarse de ser el caso, y remediarla.

Una vez todo aclarado se realiza la versión **final** del reporte incluyendo todas las modificaciones y puntos aclarados en la junta, y esta se entrega a las personas responsables.

### Prueba Post-Remediación

> Muchos contratos incluyen una **Prueba Post-Remediación** como parte de todo el trabajo. En esta, proporciona documentación y evidencia acerca de la remediación de las vulnerabilidades y nosotros realizaremos las pruebas ofensivas pertinentes para verificar que la vulnerabilidad ha sido remediada adecuadamente.

Adicionalmente, se realizara otro reporte corto acerca de las vulnerabilidades y su estado antes y después de la remediación, especificando las que han sido correctamente parchadas y las que no.

En los casos de remediación, debemos proveer las evidencias adecuadas que demuestren que la vulnerabilidad ya no esta presente.

Es importante recalcar que como *Pentesters*, debemos mantener un rol imparcial y externo durante la remediación.
==No es nuestra obligación remediar ni dar recomendaciones explícitas sobre las correcciones al código y mucho menos brindar el código.==
De esta manera mantenemos la integridad de la prueba al evitar cualquier posible conflicto de interés durante el proceso al adquirir responsabilidades innecesarias.

### Retención  y Depuración de datos

Al terminar la prueba, de seguro habremos recopilado una cantidad importante de información acerca del cliente como registros, credenciales, capturas de pantalla, archivos, etc.

Por ley y según el país, estamos obligados a mantener y almacenar ==de forma segura== los datos en nuestra posesión por cierto periodo de tiempo en caso de cualquier aclaración por el cliente o por una entidad autorizada.

Despues de que se cumpla este periodo de tiempo, estamos totalmente obligados a depurar toda esta información y evidencias de nuestros sistemas.

### Cierre

> Una vez entregado el reporte final, asistido en cualquier duda referente a la remediación y de haber realizado la respectiva prueba post-remediación en caso de ser requerido, podemos finalmente dar por concluida la prueba.

Finalmente, se cobra la cantidad acordada al cliente por los servicios realizados.

Además, se puede realizar una encuesta de satisfacción al cliente referente a la prueba y a su punto de vista durante ésta. Así podemos mejorar cualquier aspecto que debamos mejorar para la comodidad de los clientes.

# Enlaces

[<- Anterior](PruebaConcepto.md)  |