[<- Índice](../../../Pentesting.md)
# Protocolos de Administración Remota Linux

En el gran mundo de las distribuciones *Linux*, existen múltiples maneras y protocolos para administrar un sistema de forma remota.
Estos se encuentran casi en todos los servidores públicos pues proporcionan versatilidad para manipular el sistema sin tener que estar físicamente presente en su ubicación.

Claro, como auditores de seguridad, es importante saber enumerar correctamente estos servicios y entender como funcionan, pues suelen ser una entrada directa a una línea de comandos.

## SSH

> El popular ***SSH*** (*Secure Shell*) permite la comunicación cifrada entre 2 computadoras, salvaguardando la información posiblemente sensible que es transmitida a través de la red.
> Básicamente, permite que el **cliente** se conecte al **servidor** en el puerto **22** y obtenga una **línea de comandos**.

El servidor *SSH* puede configurarse para que únicamente permita conexiones de clientes específicos. Básicamente, se puede definir una *whitelist* de clientes.

Otra ventaja de *SSH* es que es un protocolo compatible con todos los sistemas operativos, ademas de que, por su naturaleza nativa en sistemas *UNIX*, posee implementaciones muy buenas en sistemas *Linux* y *macOS*.

La implemetación más **destacada** por lejos es el conocido **OpenBSD SSH** (o símplemente *OpenSSH*), un *fork* de código abierto del *software* original y comercial de servidor *SSH* publicado por *SSH Communications Security*:

Esto no significa que no podamos encontrar *SSH* en *Windows*, pues existen igual muchas implementaciones de este protocolo para esta familia de sistemas operativos.

Actualmente, se considera que existen 2 versiones de *SSH*: `SSH-1` y `SSH-2`.
Este último se considera un versión más avanzada del protocolo, superandolo en métricas como integridad de la encriptación, velocidad, estabilidad y seguridad general.
Por ejemplo, `SSH-1` es susceptible a ataques **MITM** (*Man In The Middle*), mientras que `SSH-2` no.

Volviendo al tema de la administración, como se mencionó antes *SSH* permite el despliegue de una línea de comandos interactiva para el cliente o puede recibir directamente comandos o instrucciones deseadas y ejecutarlas.
Por ejemplo, posee mecanismos básicos de transferencia de archivos, redirección de puertos y ejecución de comandos.

Pero antes, debemos autenticarnos ante el servidor para poder hacer uso de estos servicios.
Actualmente **OpenSSH** soporta 6 métodos de autenticación diferentes:

1. Autenticación mediante **contraseña**
2. Autenticación mediante **llave pública**
3. Autenticación basada en **host** (Sin necesidad de llaves ni contraseñas, únicamente por la confianza que se tienen ambos equipos)
4. Autenticación mediante **teclado**
5. Autenticación mediante **desafio**
6. Autenticación **GSSAPI**

Como los últimos 4 métodos son mecanismos avanzados de autenticación que se salen del alcance de este curso, y dado que ya estamos familiarizados con las autenticaciones por contraseña, ahondaremos únicamente en la autenticación por **llave pública**.

#### Autenticación de llave publica

---