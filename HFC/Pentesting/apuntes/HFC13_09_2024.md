# Pentesting (Pruebas de penetración)

## Introducción

### - ¿Qué es un hacker?

EL término *"hacker"* nació en la segunda mitad del siglo *XX* y su origen está ligado con los clubs y laboratorios del **Instituto Tecnológico de Massachusetts**.

El término *hack* hacía referencia a bromas inocentes que se hacían entre ellos los miembros del **Laboratorio de Inteligencia Artificial del MIT** por lo cual fueron los primeros en autodenominarse *"hackers"*.

Desde entonces se afianzo la definición como una comunidad de entusiastas programadores y diseñadores de sistemas.

Sin embargo, la definición ha evolucionado a lo largo de los años, brindando incluso distinas definiciones:

- Una persona que practica la programación informática, como una especie de pasión artística.
- Persona experta en el manejo de computadoras, que se ocupa de la seguridad de los sistemas y de desarrollar técnicas de mejora.
- Individuo que accede ilegalmente a sistemas informáticos ajenos para apropiarselos u obtener información secreta.

## Ética hacker

1. **El acceso a las computadoras y cualquier cosa que pueda enseñar algo acerca de la forma en que funciona el mundo debería ser ilimitado y total**. Este acceso ayuda a la expansión de la tecnología

2. **Toda la información debe ser libre**. Un sistema abierto con libre intercambio de información permite una mayor creatividad en general.

3. **Desconfía en la autoridad, promueve la descentralización**. Los hackers creen que las burocracias son sistemas defectuosos.

4. **Los hackers deben ser juzgados por su capacidad, no por criterios como titulos, edad, etnia, sexo o posición**. La ética *hacker* es un sistema meritocrático.

5. **Puedes crear arte y belleza en un ordenador**

6. **Las computadoras pueden cambiar tu vida para mejor**

## Actitud hacker

1. **El mundo está lleno de problemas fascinantes que esperan ser resueltos**

2. **Ningún problema tendría que resolverse 2 veces**. Cada vez que resuelvas un problema, compartelo con la comunidad.

3. **El aburrimiento y el trabajo rutinario son perniciosos**. Ninguna persona debería hacer un trabajo para el que no está motivado.

4. **La libertad es buena**

5. **La actitud no es sustituto para la competencia**. Un hacker siempre debe estar dispuesto a afinar sus habilidades y competencias.

---
## Definiciones importantes

**Perimetro**: Todo aquello que esta destinado a proteger aquello que esta aislado, como infromación, recursos, etc.

**Información**: Es un conjunto de datos organizados con un significado.

**Privilegio**: En este contexto, es la capacidad de acceder a ciertos datos "restringidos".

**Información privilegiada**: Información que solo debe ser accedida personas con el privilegio adecuado.

### Confidencialidad
Propiedad de la información de mantenerse oculta o restringida ante entes sin los privilegios adecuados.

### Integridad
Propiedad de la información de mantenerse inalterable.

### Disponibilidad o Accesibilidad
Capacidad de la información de ser consultada en cualquier momento.

## Definición de prueba de penetración

Es el acto de evaluar la seguridad de un "sistema" o ente y debe poseer las siguientes características:
- Organizado
- Dirigido
- Autorizado

**Objetivos**:
- Identificar
- Evaluar
- Reportar

### Entornos de prueba

- Físico
- Ingeniería Social (Entiendase abusar o aprovecharme de los descuidos de una persona)
- IoT
- Red
- Aplicaciones móviles
- Aplicaciones *web*

## Tipos de pruebas de penetración

**Externa**: Es una prueba de penetración simulando que eres una persona ajena al entorno
**Interna**: En este tipo de pruebas se simula que eres una persona interna al sistema con intenciones maliciosas

**Caja negra**: En este tipo de pruebas se carece de información sobre la organización, recursos o disposición del sistema. Se relaciona con las pruebas de penetración externas.

**Caja blanca**: En este tipo de pruebas se cuenta con total información acerca del sistema, la red, se tiene acceso al intranet y se han superado las defensas perimetrales.

**Caja gris**: Es un punto en medio entre los 2 ejemplos anteriores, donde nos brindan un "punto de inicio" de conocimiento acerca del sistema.

## Implicaciones legales

Cualquier violación no autorizada de un perimetro tiene como consecuencia directa ==la carcel==.

---
## Fases

- Precompromiso

- Reconocimiento
- Explotación
- Evaluación
- Post-explotación
- Prueba de concepto (*PoC*)

- Post-compromiso

### Pre-compromiso
- Acuerdos legales y delimitaciones
- RoE (*Rules of Engagement*)

### Reconocimiento

**Tipos**:
- Reconocimiento pasivo
- Reconocimiento activo

### Explotación

**Fases**:
- Preparación de la carga útil
- Entrega
- Activación

### Evaluación
- Categorización según estándares, vectores y complejidad

### Post-Explotación

**Etapas**:
- Persistencia (Capacidad de mantener el acceso al dispositivo)
- Escalación de privilegios
- Reconocimiento*

**Tipos**
- Evasiva (Quiero evitar la detección y quiero mantenerme en el sistema)
- Exfiltrativa (Quiero exfiltrar la información)
- Escalativa o Movimiento lateral (Deseo escalar o moverme de dispositivo a través de la red)
- Comando y control ()

### Prueba de concepto (PoC)
Consiste en documentar formalmente el proceso hallado para explotar la vulnerabilidad

**Etapas**:
- Análisis
- Diseño
- Replicación y pruebas
- Documentación
- Demostración

### Post-compromiso

**Etapas**:
- Limpieza
- Reunion de informes
- Plan de remediación (Sugerencias de corrección en el sistema)

Ahora ahondaremos más profundamente en las etapas.

# Pre-Compromiso

## Acuerdos legales

- *RoE* (*Rules of Engagement*)
- *NDA* (*Non-Disclosure Agreement*)
- *MOU* (*Memorandum of Understanding*)

### Rules of Engagement

- Define objetivos y criterios
- Establece el alcance de la prueba (Define sobre que secciones del sistema o perimétro se va a realizar la prueba)
- Especifíca la metodología
- Desglosa las fechas de entrega

### NDA (Non-Disclosure Agreement)

Básicamente un acuerdo de confidencialidad:

- Gara

### MOU (Memorandum of Understanding)

- Describe roles y responsabilidades
- Describe canales de comunicación
- Resume lo anteriormente acordado