[<- Índice](../Pentesting.md)
# Pentesting (Pruebas de penetración)

## Introducción

### - ¿Qué es un hacker?

EL término *"hacker"* nació en la segunda mitad del siglo *XX* y su origen está ligado con los clubs y laboratorios del **Instituto Tecnológico de Massachusetts**.

El término *hack* hacía referencia a bromas inocentes que se hacían entre ellos los miembros del **Laboratorio de Inteligencia Artificial del MIT** por lo cual fueron los primeros en autodenominarse *"hackers"*.

Desde entonces se afianzo la definición como una comunidad de entusiastas programadores y diseñadores de sistemas.

Sin embargo, la definición ha evolucionado a lo largo de los años, brindando incluso distinas definiciones:

- Una persona que practica la programación informática, como una especie de pasión artística.
- Persona experta en el manejo de computadoras, que se ocupa de la seguridad de los sistemas y de desarrollar técnicas de mejora.
- Individuo que accede ilegalmente a sistemas informáticos ajenos para apropiarselos u obtener información secreta.

## Ética hacker

1. **El acceso a las computadoras y cualquier cosa que pueda enseñar algo acerca de la forma en que funciona el mundo debería ser ilimitado y total**. Este acceso ayuda a la expansión de la tecnología

2. **Toda la información debe ser libre**. Un sistema abierto con libre intercambio de información permite una mayor creatividad en general.

3. **Desconfía en la autoridad, promueve la descentralización**. Los hackers creen que las burocracias son sistemas defectuosos.

4. **Los hackers deben ser juzgados por su capacidad, no por criterios como titulos, edad, etnia, sexo o posición**. La ética *hacker* es un sistema meritocrático.

5. **Puedes crear arte y belleza en un ordenador**

6. **Las computadoras pueden cambiar tu vida para mejor**

## Actitud hacker

1. **El mundo está lleno de problemas fascinantes que esperan ser resueltos**

2. **Ningún problema tendría que resolverse 2 veces**. Cada vez que resuelvas un problema, compartelo con la comunidad.

3. **El aburrimiento y el trabajo rutinario son perniciosos**. Ninguna persona debería hacer un trabajo para el que no está motivado.

4. **La libertad es buena**

5. **La actitud no es sustituto para la competencia**. Un hacker siempre debe estar dispuesto a afinar sus habilidades y competencias.

---
## Definiciones importantes

- **Perimetro**: Todo aquello que esta destinado a proteger aquello que esta aislado, como infromación, recursos, etc.
- Otra definición, es una delimitación entre una red pública y una red privada.

- **Información**: Es un conjunto de datos organizados con un significado.

- **Privilegio**: En este contexto, es la capacidad de acceder a ciertos datos "restringidos".

- **Información privilegiada**: Información que solo debe ser accedida personas con el privilegio adecuado.

## Las 3 propiedades de la información (CIA)

### Confidencialidad
Propiedad de la información de mantenerse oculta o restringida ante entes sin los privilegios adecuados.

### Integridad
Propiedad de la información de mantenerse inalterable.

### Disponibilidad o Accesibilidad
Capacidad de la información de ser consultada en cualquier momento que la requiera alguién con la autorización adecuada.

---
## Definición de prueba de penetración

> Es el acto de evaluar la seguridad de un "sistema" o ente

Debe poseer las siguientes características:
- Organizado
- Dirigido
- Autorizado

> Sus objetivos son **identificar**, **evaluar** y **reportar** vulnerabilidades en un sistema.

### Entornos de prueba

- Físico
- Ingeniería Social (Entiendase abusar o aprovecharse de los descuidos de una persona)
- IoT
- Red
- Aplicaciones móviles
- Aplicaciones *web*

## Tipos de pruebas de penetración

**Externa**: Es una prueba de penetración simulando que eres una persona ajena al entorno

**Interna**: En este tipo de pruebas se simula que eres una persona interna al sistema con intenciones maliciosas

Otra clasificación de las pruebas de penetración es:

**Caja negra**: En este tipo de pruebas se carece de información sobre la organización, recursos o disposición del sistema. Se relaciona con las pruebas de penetración externas.

**Caja blanca**: En este tipo de pruebas se cuenta con total información acerca del sistema, la red, se tiene acceso al intranet y se han superado las defensas perimetrales.

**Caja gris**: Es un punto en medio entre los 2 ejemplos anteriores, donde nos brindan un "punto de inicio" de conocimiento acerca del sistema.

## Implicaciones legales

Cualquier violación no autorizada de un perimetro tiene como consecuencia directa ==la carcel==.

---
## Introducción a las Fases de un *Pentest*

- Precompromiso

- Reconocimiento
- Evaluación
- Explotación
- Post-explotación
- Prueba de concepto (*PoC*)

- Post-compromiso

### Pre-compromiso
Consiste en hacer un trato formal con una empresa acerca de poner a prueba su sistema o ciertas partes de este.

**Etapas**:
- Acuerdos legales y delimitaciones
- RoE (*Rules of Engagement*)

### Reconocimiento
Consiste en ==enumerar== ("descubrir") todos los posibles recursos por los que podriamos atacar, de modo que tengamos la mayor información útil del sistema.

**Etapas**:
- Reconocimiento pasivo
- Reconocimiento activo

### Evaluación
Consiste en evaluar todos los recursos que tenemos conocimiento, por donde nos conviene iniciar un ataque, dada su complejidad, seguridad, etc.

- Categorización según estándares, vectores y complejidad

### Explotación
Una vez hecha la evaluación, consiste en idear el ==exploit== (carga útil), entregarla íntegra al sistema y activarla.

**Etapas**:
- Preparación de la carga útil
- Entrega
- Activación

### Post-Explotación
Consiste en, reevaluar elnuevo estado del sistema despues del *exploit*, escalar privilegios, conseguir persistencia, reevaluar y reexplotar.

**Etapas**:
- Persistencia (Capacidad de mantener el acceso al dispositivo)
- Escalación de privilegios
- Reconocimiento*

**Tipos**
- Evasiva (Quiero evitar la detección y quiero mantenerme en el sistema)
- Exfiltrativa (Quiero exfiltrar la información)
- Escalativa o Movimiento lateral (Deseo escalar o moverme de dispositivo a través de la red)
- Comando y control

### Prueba de concepto (PoC)
Consiste en documentar formalmente el proceso hallado para explotar la vulnerabilidad

**Etapas**:
- Análisis
- Diseño
- Replicación y pruebas
- Documentación
- Demostración

### Post-compromiso
Consiste en comunicarle a la empresa tus hallazgos, limpiar el sistema y proponer remedios a las vulnerabilidades que hallaste.

**Etapas**:
- Limpieza
- Reunion de informes
- Plan de remediación (Sugerencias de corrección en el sistema)

> Ahora ahondaremos más profundamente en las etapas.

# Pre-Compromiso

## Acuerdos legales

- *RoE* (*Rules of Engagement*)
- *NDA* (*Non-Disclosure Agreement*)
- *MOU* (*Memorandum of Understanding*)
- Clausula de no Competencia

### Rules of Engagement

- Define objetivos y criterios
- Establece el alcance de la prueba (Define sobre que secciones del sistema o perimétro se va a realizar la prueba)
- Especifíca la metodología
- Desglosa las fechas de entrega

> Las metodologías más importantes de las pruebas de penetración son:

#### OSSTMM (Open Source Security Testing Methodology Manual)

Esta metodología se enfoca prinicpalmente en la comunicación de aplicaciones, es decir:
- Telecomunicaciones (Telefonos por ejemplo)
- Redes cableadas
- Comunicaciones inalámbricas

#### OWASP (Open Web Application Security Project)

Se utiliza solamente para poner a prueba aplicaciones y servicios web.

#### NIST Cybersecurity Framework

Se enfoca principalmente en mejorar y establecer estándares de ciberseguridad y regular el riesgo de ciberataques.

#### NSCS CAF (NSCS Cyber Assesment Framework)

Esta metodología se enfoca principalmente en procurar aspectos para minimizar el riesgo de ciberamenzas, pues está enfocada a organizaciones que se considere que realicen *"servicios y actividades de alta importancia"*

### NDA (Non-Disclosure Agreement)

Básicamente un acuerdo de confidencialidad:

- Garantiza la no divulgación
- Delimita el tiempo de almacenamiento
- Acuerda consecuencias específicas

### MOU (Memorandum of Understanding)

- Describe roles y responsabilidades
- Describe canales de comunicación
- Resume lo anteriormente acordado

# Enlaces

[Siguiente ->](HFC17_09_2024.md)